<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        body{
            font-family: 'Roboto', sans-serif;
            margin: 0;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="font-weight: bold; margin:0;">
        <div class="container-fluid" style="background-color:#D1D1D1; margin:0;">
            <a class="navbar-brand" href="home.html" style="font-size: 1.8rem;">NU-Connect</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item mx-3">
                        <a class="nav-link active" aria-current="page" href="home.html">Home</a>
                    </li>
                    <li class="nav-item mx-3">
                        <a class="nav-link active" aria-current="page" href="write_question.html">Ask Question</a>
                    </li>
                    <li class="nav-item mx-3">
                        <a class="nav-link active" aria-current="page" href="#">About Us</a>
                    </li>
                </ul>
                <form class="d-flex">
                    <input id = "searchNote" class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-dark mx-3" type="submit">Search</button>
                </form>
                <button class="btn btn-outline-dark" type="submit" style="margin-left: 20px;">Sign Up</button>
            </div>
        </div>
    </nav>






    <!-- <div class="container mt-5 mb-5">
        <div class="d-flex justify-content-center row">
            <div class="d-flex flex-column col-md-8">
                
                <div class="coment-bottom bg-white p-2 px-4">
                    <div class="d-flex flex-row add-comment-section mt-4 mb-4"><input type="text" class="form-control mr-3" placeholder="Add comment"><button class="btn btn-primary" type="button">Comment</button></div>
                    <div class="commented-section mt-2">
                        <div class="d-flex flex-row align-items-center commented-user">
                            <h5 class="mr-2">Corey oates</h5><span class="dot mb-1"></span><span class="mb-1 ml-2">4 hours ago</span>
                        </div>
                        <div class="comment-text-sm"><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</span></div>
                        <div class="reply-section">
                            <div class="d-flex flex-row align-items-center voting-icons"><i class="fa fa-sort-up fa-2x mt-3 hit-voting"></i><i class="fa fa-sort-down fa-2x mb-3 hit-voting"></i><span class="ml-2">10</span><span class="dot ml-2"></span>
                                <h6 class="ml-2 mt-1">Reply</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->

    <!-- <div class="container" id="home_que">
         <div class="row" style="display: grid; place-items:center;margin: 10px auto;border: #06113C 2px solid;border-radius: 10px;background-color: #9FC088;color: #00092C;">
            <div class="entity">
                <div class="heading">
                    <span class="title">Title goes here</span>
                    <span class="username">~UserName</span>
                </div>
                <div class="question">
                    Question goes here.
                </div>
            </div>
        </div> 
        
      </div> -->

      <!-- <div class="container">

          
      </div> -->

      <!-- <div class="container">
        <div class="row">
          <div class="col">
            Column
          </div>
          <div class="col">
            Column
          </div>
          <div class="col">
            Column
          </div>
        </div>
      </div> -->

      <div class="container">
        <div class="row row-cols-lg-4 row-cols-md-2 row-cols-sm-1" id="home_que">
            <div class="col my-3">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                      <h5 class="card-title">Title</h5>
                      <h5 class="card-subtitle mb-2 text-muted">Username</h5>
                      <p class="card-text" style="text-overflow: ellipsis; overflow:hidden; height:100px;">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                      <span class="card-subtitle mb-2 text-muted">Tag</span><span class="card-subtitle mb-2 text-muted timing">01/01/0001  00:00</span>
                    </div>
                  </div>
            </div>
            
            
        </div>
      </div>











      

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous">
    </script>

    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-database-compat.js"></script>
    <script type="module">
        const firebaseConfig = {
            apiKey: "AIzaSyAM-2H9COFO6pZm-zzejjtqtQN9JMlaNi0",
            authDomain: "nu-connect-7c019.firebaseapp.com",
            projectId: "nu-connect-7c019",
            storageBucket: "nu-connect-7c019.appspot.com",
            messagingSenderId: "679682236652",
            databaseURL:"https://nu-connect-7c019-default-rtdb.asia-southeast1.firebasedatabase.app/",
            appId: "1:679682236652:web:3a694529bb4b60bd1205c9"
        };

        var app = firebase.initializeApp(firebaseConfig)
        var target = document.getElementById("home_que")
        var query = firebase.database().ref("question").orderByKey();

     /*   var comments = [
            {
                username: 'ju',
                comment: 'c1',
                time: 'time'
            },
            {
                username: 'urvik',
                comment: 'c2',
                time: 'time'
            },
        ];

        firebase.database().ref('question/' + '1').update({
            comment: JSON.stringify(comments)
        })*/


        query.once("value")
        .then(function(snapshot) {
            target.innerHTML = ""
            snapshot.forEach(function(childSnapshot) {
                var key = childSnapshot.key;
                var user = localStorage.getItem("currentUser");
                var childData = childSnapshot.val();
                console.log(childData);
        /*        var entity = `
                <div class="row" id="${key}" style="display: grid; place-items:center;margin: 10px auto;border: #06113C 2px solid;border-radius: 10px;background-color: #9FC088;color: #00092C;">
                    <div class="entity">
                        <div class="heading">
                            <span class="title">${childData.title}</span>
                            <span class="username">~${childData.username}</span>
                        </div>
                        <div class="question">
                            ${childData.desc}
                        </div>
                    </div>
                </div>
                `;*/

                var entity = `
                <div class="col my-3" id=${key} style="background-image: linear-gradient(to up ,#3a0ca3 , white);">
                    <div class="card" style="width: 18rem;"style="background-image: linear-gradient(to up ,#3a0ca3 , white);">
                        <div class="card-body" style="background-image: linear-gradient(to top ,#DDDDDD , white); border:#D1D1D1 2px solid; height:220px;">
                          <h5 class="card-title" style="font-size:1.4rem">${childData.title}</h5>
                          <h5 class="card-subtitle mb-2 text-muted" style="font-size:0.8rem">~${childData.username}</h5>
                          <p class="card-text"  style="text-overflow: ellipsis; overflow:hidden;height:100px;">${childData.desc}</p>
                          <span class="card-subtitle mb-2 text-muted">${childData.tag}</span><span class="card-subtitle mb-2 text-muted timing">${childData.time}</span>
                        </div>
                      </div>
                </div>
                `;

                target.innerHTML += entity;
            });
            console.log(target.innerHTML);
        }).then(runMeAfterThis);

        function runMeAfterThis(){
            for(var i=0;i<=100000;i++){
                try{
                    document.getElementById(i).addEventListener("click" , function(){
                        tempfunc(this.id);
                    })
                }
                catch(e){
                    console.log("value of I : " , i);
                    break;
                }
            }
        }

        function tempfunc(questionId){
            console.log("Question : " , questionId);
            localStorage.setItem("currentQuestion" , questionId)
            window.location.href = "comments.html"
        }

    </script>
</body>
</html>

